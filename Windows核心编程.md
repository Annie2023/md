Windows核心编程

vs2019解决方案可以有多个项目

win32编写一个窗口流程

资源文件

消息循环（消息：操作系统给每个消息创建）

getmessage有消息返回，没消息等      bool：特别消息true，其他消息false

translatemessage（）   

dispatchmessage

显示CPU占用



TextOut(hdc, 100, 200, L"helloworld", 10);

hdc：指定设备显示文字

（100，200）：从左上开始，xy坐标



和printf差异

（1）、需要自己生成字符串

（2）、不满足\n等

（3）、位置，自动实现转义功能（drawtext实现自动折行）



s_printf:把字串设置到第一个字符串上

窄字符，宽字符

输入：WM_CHAR       自动： 编辑框控件         处理WM_CHAR



进程之间是隔离的 和跨进程**继承**（同步）  ----->内存修改器（根据变量找出一堆地址，修改原来变量在修改进程看那个变量值改了精准定位地址，然后就可以随意修改啦）

操作系统为每个进程维护一张表

Windows多任务操作系统，物理内存和虚拟内存

操作系统知识（救命啊啊啊啊哈哈哈哈）

内存管理程序      普通应用程序和操作系统程序

物理地址和逻辑地址

Windows每个进程独立内存空间



内核对象的数据结构只能被内核访问，应用程序无法直接访问以及修改，只能通过操作系统提供的函数修改

主要内核对象

```
进程
线程
事件
文件
文件映射对象（指针，文件映射内存）
信标（Semaphore）
互斥对象（Mutex）
作业（Job）
可等待定时器（Timer
）
控制台输入（）
```

内核对象用句柄来标识

进程与句柄值一一对应

在进程中的其他线程可以使用该进程的句柄值

内核对象是由内核拥有的，可给不同进程使用

内核对象的存在事件可以比创建该内核对象进程的时间长

内核对象有使用计数（共享记录）



内核对象和用户对象的区别，可根据安全描述符区分

设备驱动程序（CreatFile）

文件映射对象能让两个进程共享数据块



对象句柄的继承：

需要父进程设置相关参数为true

救。。。。

标志

进程执行文件名，可指定工作目录

不同线程对应不同句柄值，防止干扰，切到其他进程可能还是会干扰，所以需要同步



与进程内核对象句柄不同

每一个可执行文件或DLL文件被装入进程地址空间，会有一个唯一的实例化模块句柄

线程的局部变量私有

静态变量共享，需要同步